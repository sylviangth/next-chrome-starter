(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(2176)}])},2176:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return M}});var s=l(5893),a=l(7294),n=l(2708);function i(e){let{trackVisibility:t}=e,{ref:l,entry:i,inView:r}=(0,n.YD)({trackVisibility:t,delay:100,rootMargin:"0px 0px -150px 0px"});return a.useEffect(()=>{t&&!r&&(null==i||i.target.scrollIntoView({block:"start"}))},[r,i,t]),(0,s.jsx)("div",{ref:l,className:"h-px w-full"})}var r=l(2390),o=l(1297);let c=e=>{let{msgContent:t}=e,l=async()=>{try{await navigator.clipboard.writeText(t)}catch(e){console.error("Failed to copy text: ",e)}};return(0,s.jsxs)("div",{className:"w-full flex flex-col items-start gap-2",children:[(0,s.jsx)("p",{className:"text-sm",children:t}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(r.e,{content:"Copy to clipboard",placement:"bottom",children:(0,s.jsx)(o.A,{onClick:()=>void l(),isIconOnly:!0,variant:"flat",size:"sm",color:"default",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-check",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"}),(0,s.jsx)("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),(0,s.jsx)("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})]})})})})]})},d=e=>{let{messages:t,latestMessage:l,isLoading:a}=e;return(0,s.jsxs)("ul",{className:"flex flex-col gap-4 w-full divide-y",children:[t.length>0?t.map((e,t)=>"user"===e.role?(0,s.jsx)("li",{className:"w-full pt-4",children:(0,s.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,s.jsx)("div",{className:"flex-none w-8 h-8 rounded-full flex items-center justify-center text-indigo-600 bg-indigo-100",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-person",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"})})}),(0,s.jsx)(c,{msgContent:e.content})]})},t):(0,s.jsx)("li",{className:"w-full pt-4",children:(0,s.jsxs)("div",{className:"w-full flex gap-4 items-start",children:[(0,s.jsx)("img",{alt:"Mindie Avatar",src:"/icons/icon48.png",className:"flex-none w-8 h-8 rounded-full",width:100,height:100}),(0,s.jsx)(c,{msgContent:e.content})]})},t)):(0,s.jsx)("div",{className:"w-full flex items-center justify-center text-center",children:(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"No messages so far to display."})}),""!==l&&(0,s.jsx)("li",{className:"w-full pt-4",children:(0,s.jsxs)("div",{className:"w-full flex gap-4 items-start",children:[(0,s.jsx)("img",{alt:"Mindie Avatar",src:"/icons/icon48.png",className:"flex-none w-8 h-8 rounded-full",width:100,height:100}),(0,s.jsx)(c,{msgContent:l})]})}),(0,s.jsx)(i,{trackVisibility:a||!!t})]})};var u=l(2484),h=l(3030),m=l(578),x=l(241),p=l(6154);let f="https://mindpalspace.lemonsqueezy.com/checkout/buy/b71b4125-b28d-44fa-bfe1-4d6bded34b1c",g=async e=>{try{let t=await p.Z.post("https://api.lemonsqueezy.com/v1/licenses/activate",{license_key:e,instance_name:"Official"},{headers:{Accept:"application/json"}});return t.data}catch(e){console.error(e)}},y=e=>{let{licenseKey:t,fetchLicenseKey:l}=e,[n,i]=(0,a.useState)(t||""),[r,c]=(0,a.useState)(null),d=async()=>{if(!n||!n.trim()){c("Invalid Lemon Squeezy License Key.");return}try{let e=await g(n);if(!e||e.error){c("Invalid Lemon Squeezy License Key.");return}if(26052===e.meta.store_id&&!0==e.activated&&119974===e.meta.product_id)chrome.storage.local.set({licenseKey:n}).then(()=>{l()});else{c("Invalid license key. Please double-check your license key.");return}}catch(e){console.error(e),c("Something went wrong while activating your license key.")}};return(0,s.jsxs)("section",{className:"w-full flex flex-col gap-4",children:[!t&&(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,s.jsxs)("div",{className:"text-sm w-full flex items-center gap-2",children:[(0,s.jsx)("h3",{children:"Don't have a license key?"}),(0,s.jsx)(u.O,{size:"sm",isExternal:!0,href:f,showAnchorIcon:!0,className:"font-bold",children:"Buy one here"})]}),(0,s.jsxs)("div",{className:"text-sm w-full flex items-center gap-2",children:[(0,s.jsx)("h3",{children:"Lost your license key?"}),(0,s.jsx)(u.O,{size:"sm",isExternal:!0,href:"https://app.lemonsqueezy.com/my-orders/",showAnchorIcon:!0,className:"font-bold",children:"Find it here"})]})]}),t?(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsx)(x.Y,{isDisabled:!0,type:"text",label:"Your license key",className:"w-full",radius:"sm",value:n}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(o.A,{size:"md",radius:"sm",color:"primary",variant:"flat",onClick:()=>window.open("https://app.lemonsqueezy.com/my-orders/","_blank"),children:"Manage"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsx)(x.Y,{type:"text",label:"Input a valid License key",value:n,onChange:e=>i(e.target.value),className:"w-full",radius:"sm"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(o.A,{size:"md",radius:"sm",color:"primary",variant:"flat",disabled:!n||!n.trim(),onClick:()=>void d(),children:"Activate"})}),r&&(0,s.jsx)("p",{className:"text-danger",children:r})]})]})},w=e=>{let{input:t,setInput:l,licenseKey:n,apiKey:i,queriesCount:r,handleSubmit:c,isLoading:d}=e,x=(0,a.useRef)(null),p=e=>{if("Enter"===e.key&&!e.shiftKey&&!e.nativeEvent.isComposing){var t;null===(t=x.current)||void 0===t||t.requestSubmit(),e.preventDefault()}};return(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),c(t)},ref:x,className:"relative sticky bottom-6 flex flex-col gap-3",children:(0,s.jsxs)("div",{className:"w-full h-full flex flex-col items-center bg-white px-3 py-2 rounded-xl shadow-lg border-2 border-primary",children:[!n&&r>20&&(0,s.jsxs)("p",{className:"text-danger text-center",children:["Oh no, you're out of free queries! ",(0,s.jsx)(u.O,{href:f,className:"font-bold",isExternal:!0,showAnchorIcon:!0,children:"Buy a license key here"})," to unlock unlimited queries."]}),!i&&(0,s.jsx)("p",{className:"text-danger text-center",children:"Oops! Looks like you forgot to enter your OpenAI API key in the Settings tab. Please do so to continue using Mindie."}),(0,s.jsxs)("div",{className:"w-full flex items-center gap-3",children:[d?(0,s.jsx)(h.W,{size:"sm",isIndeterminate:!0,"aria-label":"Loading...",className:"w-full"}):(0,s.jsx)("div",{className:"w-full flex items-center gap-3",children:(0,s.jsx)(m.Y,{rows:1,minRows:1,radius:"sm",onKeyDown:p,placeholder:"Ask Mindie anything",value:t,onChange:e=>l(e.target.value)})}),(0,s.jsx)(o.A,{variant:"shadow",color:t&&t.trim()?"success":"default",radius:"sm",className:"text-white",endContent:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"flex-none w-3 h-3 bi bi-send",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"})}),isDisabled:!t||!t.trim()||!i||!n&&r>20,onClick:()=>void c(t),children:"Send"})]})]})})},v=e=>{let{favIconUrl:t,title:l}=e;return(0,s.jsxs)("div",{className:"w-full px-6 py-4 rounded-lg bg-default-100 flex flex-col items-center gap-2",children:[(0,s.jsx)("p",{className:"text-xs text-default-500",children:"You're chatting with"}),t&&(0,s.jsx)("img",{src:t,alt:l,className:"w-12 h-12 rounded-full"}),(0,s.jsx)("h1",{className:"text-sm text-center font-medium",children:l})]})};var j=l(6283),b=l(2134),N=l(6822),A=l(7392);let k=e=>{let{Component:t,children:l,getBaseProps:a,getInputProps:n,getLabelProps:i,getLabelWrapperProps:r}=(0,j.x)(e);return(0,s.jsxs)(t,{...a(),className:(0,b.cn)("group inline-flex items-center hover:opacity-70 active:opacity-50 justify-between flex-row-reverse tap-highlight-transparent","cursor-pointer border-2 border-default rounded-lg","data-[selected=true]:border-primary"),children:[(0,s.jsx)(N.T,{children:(0,s.jsx)("input",{...n()})}),(0,s.jsx)("div",{...r(),className:"px-3 py-1.5",children:l&&(0,s.jsx)("span",{...i(),className:"flex items-center gap-3 text-sm",children:l})})]})},S=async(e,t)=>{let l="https://fymvbnibdm.us-west-2.awsapprunner.com/api/queries/get-related-queries?openai_api_key=".concat(e,"&previous_queries=").concat(t);try{let e=await fetch(l,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!e.ok)throw Error("HTTP Error! Status: ".concat(e.status));let t=await e.json();return t.question}catch(e){console.log(e),console.error(e)}},C=e=>{let{isLoading:t,disabled:l,previousMessages:n,setInput:i,handleSubmit:r}=e,[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(null),h=()=>{chrome.storage.local.get(["openAiApiKey"]).then(e=>{e.openAiApiKey&&u(e.openAiApiKey)})};(0,a.useEffect)(()=>{h()},[]),(0,a.useEffect)(()=>{!t&&!l&&(0===o.length&&0===n.length?c(["Summarize this"]):(0===o.length||1===o.length&&"Summarize this"===o[0])&&d&&n.length>0&&(console.log("Called"),S(d,n.map(e=>e.content).join(", ")).then(e=>{e&&c(e)}).catch(e=>{console.error(e)})))},[o,n,d,l]);let m=e=>{i(o[Number(e)]),c([]),r(o[Number(e)])};return(0,s.jsx)("section",{className:"w-full pb-16",children:!l&&!t&&o.length>0&&(0,s.jsx)(A.X,{label:n.length>0?"Ask a follow-up question":"Try asking",orientation:"horizontal",className:"w-full flex flex-col items-start text-base px-2",onValueChange:m,children:o.map((e,t)=>(0,s.jsx)(k,{value:t,children:e},t))})})},O=e=>{let{fetchQueriesCount:t,licenseKey:l,apiKey:n,queriesCount:i}=e,[r,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),x=async()=>{let[e]=await chrome.tabs.query({active:!0,lastFocusedWindow:!0});return e};(0,a.useEffect)(()=>{x().then(e=>{o(e.url),u(e.title),m(e.favIconUrl)}).catch(e=>console.error(e))},[]);let[p,f]=(0,a.useState)([]),[g,y]=(0,a.useState)(""),[j,b]=(0,a.useState)(""),[N,A]=(0,a.useState)(!1),k=(e,t)=>{console.log(e,t);let l={role:e,content:t};chrome.storage.local.get([r]).then(e=>{console.log("Get updated chat history"),e[r]?chrome.storage.local.set({[r]:JSON.stringify([...JSON.parse(e[r]),l])}).then(()=>{S()}):chrome.storage.local.set({[r]:JSON.stringify([l])}).then(()=>{S()})})},S=()=>{chrome.storage.local.get([r]).then(e=>{e[r]&&(console.log(JSON.parse(e[r])),f(JSON.parse(e[r])))})};(0,a.useEffect)(()=>{r&&S()},[r]);let O=e=>{k("user",e),A(!0),I(e).then(l=>{K(e,l).then(()=>{A(!1),t()}).catch(e=>{console.error(e),A(!1)})}).catch(e=>{console.error(e),A(!1)})},I=async e=>{let t="https://fymvbnibdm.us-west-2.awsapprunner.com/api/context/get-context-from-url?openai_api_key=".concat(n,"&query=").concat(e,"&url=").concat(r,"&scrape_all=").concat(!1);try{let e=await fetch(t,{method:"POST",headers:{Accept:"application/json"}});if(!e.ok)throw Error("Request failed with status ".concat(e.status));let l=await e.json();return l.context}catch(e){throw e}},K=async(e,t)=>{y(""),b("");let l={model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a world-class algorithm to answer questions."},...p,{role:"user",content:"\n          Based on the following context, answer the following question:\n          ## CONTEXT: ".concat(t,"\n          ## QUESTION: ").concat(e,"\n          ")}],stream:!0,max_tokens:300,temperature:.5},s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(l)});if(!s.ok){console.error("Error:",s.statusText);return}let a=s.body.getReader(),i=new TextDecoder("utf-8"),r="",o="";for(;;){let{done:e,value:t}=await a.read();if(e)break;r+=i.decode(t,{stream:!0});let l=r.split("\n");for(let e of(r=l.pop(),l)){let t=e.replace(/^data: /,"").trim();if(""!==t){if("[DONE]"===t){k("assistant",o),b("");return}try{let e=JSON.parse(t),l=e.choices[0].delta.content||"";o+=l,b(o)}catch(e){console.error("Could not JSON parse stream message",{message:t,error:e})}}}}};return(0,s.jsxs)("section",{className:"px-6 w-full h-[32rem] flex flex-col justify-between gap-4 overflow-hidden overflow-y-auto",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,s.jsx)(v,{favIconUrl:h,title:c}),(0,s.jsx)(d,{messages:p,latestMessage:j,isLoading:N}),(0,s.jsx)(C,{isLoading:N,disabled:!n||!l&&i>20,previousMessages:p.filter(e=>"user"===e.role),setInput:y,handleSubmit:O})]}),(0,s.jsx)(w,{input:g,setInput:y,licenseKey:l,apiKey:n,queriesCount:i,handleSubmit:O,isLoading:N})]})};var I=l(738),K=l(3125);let z=async e=>{let t=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:"Hello"}],max_tokens:100,temperature:.2})});return!!t.ok},L=e=>{let{apiKey:t,fetchApiKey:l}=e,[n,i]=(0,a.useState)(t||""),[r,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(!1),m=async()=>{c(null);let e=await z(n);if(e)chrome.storage.local.set({openAiApiKey:n}).then(()=>{l()});else{console.log("Invalid OpenAI API Key."),c("Invalid OpenAI API Key.");return}},p=()=>{chrome.storage.local.remove(["openAiApiKey"]).then(()=>{l()})};return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsx)("p",{className:"w-full text-sm",children:"Your API keys are stored LOCALLY in your browser. No one, including Mindie team, can access your keys."}),(0,s.jsx)(x.Y,{isDisabled:!d,type:d?"text":"password",label:"Your OpenAI API Key",value:n,onChange:e=>i(e.target.value),className:"w-full",radius:"sm"}),d?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.A,{size:"md",radius:"sm",color:"primary",variant:"flat",disabled:!n||!n.trim(),onClick:()=>void m(),children:"Save"}),(0,s.jsx)(o.A,{size:"md",radius:"sm",color:"danger",variant:"flat",onClick:()=>h(!1),children:"Cancel"})]}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.A,{size:"md",radius:"sm",color:"primary",variant:"flat",onClick:()=>h(!0),children:"Change key"}),(0,s.jsx)(o.A,{size:"md",radius:"sm",color:"danger",variant:"flat",onClick:p,children:"Delete key"})]}),r&&(0,s.jsx)("p",{className:"text-danger",children:r})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,s.jsx)("p",{className:"w-full px-4 py-2.5 rounded-md font-medium text-sm text-default-600 bg-default-100",children:"Your API keys are stored LOCALLY in your browser. No one, including Mindie team, can access your keys."}),(0,s.jsxs)("div",{className:"text-sm w-full flex items-center gap-2",children:[(0,s.jsx)("h3",{children:"Don't have a key?"}),(0,s.jsx)(u.O,{href:"https://platform.openai.com/account/api-keys",className:"text-sm font-bold text-primary hover:text-primary-400",isExternal:!0,showAnchorIcon:!0,children:"Generate one here"})]}),(0,s.jsx)(x.Y,{type:"text",label:"Input a valid OpenAI API Key",value:n,onValueChange:i,className:"w-full",radius:"sm"}),r&&(0,s.jsx)("p",{className:"text-danger",children:r}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(o.A,{size:"md",radius:"sm",color:"primary",variant:"flat",disabled:!n||!n.trim(),onClick:()=>void m(),children:"Save"})})]})})},T=e=>{let{licenseKey:t,fetchLicenseKey:l,apiKey:a,fetchApiKey:n}=e,i=[{name:"License key",available:!!t,availableText:"Licensed",unavailableText:"Unlicensed",optional:!0,helpText:"A license key is not required for free trial but will be required to unlock unlimited usage.",content:(0,s.jsx)(y,{licenseKey:t,fetchLicenseKey:l})},{name:"OpenAI API key",available:!!a,availableText:"Active",unavailableText:"Missing",optional:!1,helpText:"An OpenAI API key is required to power your usage.",content:(0,s.jsx)(L,{apiKey:a,fetchApiKey:n})}];return(0,s.jsxs)("section",{className:"px-6 flex flex-col gap-4 w-full h-[32rem] overflow-hidden overflow-y-auto",children:[!a&&(0,s.jsx)("p",{className:"text-center w-full px-4 py-2.5 rounded-md text-sm text-warning-600 bg-warning-100",children:"Ready to explore Mindie? Just pop in your OpenAI API key below!"}),a&&!t&&(0,s.jsx)("p",{className:"text-center w-full px-4 py-2.5 rounded-md text-sm text-warning-600 bg-warning-100",children:"As a free user, you have a limit of 20 queries. Time to buy a license key and enjoy unlimited usage!"}),(0,s.jsx)(I.d,{showDivider:!0,className:"p-0 m-0 w-full flex flex-col gap-x-12",selectionMode:"single",itemClasses:{base:"m-0 py-0 w-full",trigger:"m-0 px-4 py-2 duration-300 data-[hover=true]:bg-default-200 rounded-lg flex items-center",title:"font-bold text-base data-[open=true]:text-primary",content:"data-[open=true]:border-l-2 data-[open=true]:border-primary px-4 pb-4"},children:i.map((e,t)=>(0,s.jsx)(K.G,{"aria-label":"Accordion ".concat(t),className:"my-2",title:"".concat(e.name," (").concat(e.optional?"Optional":"Required",")"),subtitle:e.helpText,startContent:e.available?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",className:"fill-success bi bi-check-circle-fill",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",className:"".concat(e.optional?"fill-warning":"fill-danger"," bi bi-exclamation-circle-fill"),viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})}),children:e.content},"".concat(t)))})]})};var q=l(6697),E=l(9505),_=l(6379);function M(){let[e,t]=(0,a.useState)("chat"),[l,n]=(0,a.useState)(0),i=()=>{chrome.storage.local.get(null,function(e){let t={};for(let l in e)"openAiApiKey"!==l&&"licenseKey"!==l&&(t[l]=e[l]);let l=0;for(let e in t){let s=Array.from(JSON.parse(t[e])).filter(e=>"user"===e.role).length;l+=s}n(l)})},[r,o]=(0,a.useState)(null),c=()=>{chrome.storage.local.get(["openAiApiKey"]).then(e=>{e.openAiApiKey?o(e.openAiApiKey):t("settings")})},[d,h]=(0,a.useState)(null),m=()=>{chrome.storage.local.get(["licenseKey"]).then(e=>{e.licenseKey&&h(e.licenseKey)})};return(0,a.useEffect)(()=>{i(),m(),c()},[]),(0,s.jsxs)("section",{className:"w-full flex flex-col gap-4 pt-4",children:[(0,s.jsxs)("div",{className:"w-full flex items-center justify-between gap-4 px-6",children:[(0,s.jsxs)(q.n,{radius:"full","aria-label":"Acess Tabs",selectedKey:e,onSelectionChange:e=>t(e),children:[(0,s.jsx)(E.r,{title:"Chat"},"chat"),(0,s.jsx)(E.r,{title:"Settings"},"settings")]}),d?(0,s.jsx)(_.z,{variant:"flat",color:"success",radius:"full",children:"Unlimited"}):(0,s.jsxs)("div",{className:"w-full flex flex-col items-end",children:[(0,s.jsxs)("h3",{children:[l,"/20 free queries"]}),(0,s.jsx)(u.O,{href:f,className:"font-bold",isExternal:!0,showAnchorIcon:!0,children:"Go unlimited"})]})]}),"chat"===e?(0,s.jsx)(O,{fetchQueriesCount:i,licenseKey:d,apiKey:r,queriesCount:l}):(0,s.jsx)(T,{licenseKey:d,fetchLicenseKey:m,apiKey:r,fetchApiKey:c})]})}}},function(e){e.O(0,[770,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);